<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Energy Dashboard</title>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- PDF Export Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        .card:hover {
            transform: scale(1.05);
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }
        body { font-size: 1.06rem; }
        h1,h2,h3,h4,h5,h6 { font-size: 1.25rem; }
    </style>

    <!-- Your existing Firebase + Live Graph script -->
    <script type="module">
        /* your original JS here (unchanged)... */
    </script>
</head>

<body class="bg-gray-100 text-gray-800">

    <!-- Header -->
    <header class="bg-green-700 text-white p-4 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <label for="pathSelector" class="font-semibold">Select Path:</label>
            <select id="pathSelector" class="text-black p-1 rounded"></select>
        </div>
        <h1 class="text-xl font-bold text-center flex-1">Smart Energy Dashboard</h1>
        <div id="clock" class="text-sm font-semibold"></div>
    </header>

    <!-- Selected Path Name Display -->
    <div class="bg-white shadow p-2 text-center text-green-800 font-semibold text-lg">
        <span id="currentPath">Loading...</span>
    </div>

    <!-- Main Content -->
    <main class="p-4 container mx-auto">
        <section id="cards" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"></section>

        <!-- Live Chart Section -->
        <section class="bg-white rounded-xl shadow-md p-4 mb-8">
            <h2 class="text-center text-lg font-bold mb-2">Live Graph</h2>
            <canvas id="lineChart" height="100"></canvas>
            <div class="text-center mt-4 flex justify-center gap-4">
                <button onclick="downloadChartPDF()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                    Download Chart as PDF
                </button>
                <button onclick="openHistoryModal()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                    View History
                </button>
            </div>
        </section>
    </main>

    <!-- History Modal -->
    <div id="historyModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-xl w-11/12 md:w-3/4 lg:w-1/2 relative">
            <button onclick="closeHistoryModal()" class="absolute top-2 right-2 text-gray-500 hover:text-red-600">âœ–</button>
            <h2 class="text-xl font-bold mb-4">Historical Data</h2>

            <!-- Date Range Inputs -->
            <div class="flex flex-col md:flex-row gap-4 mb-4">
                <div class="flex flex-col flex-1">
                    <label for="startDate" class="font-semibold">Start Date:</label>
                    <input type="date" id="startDate" class="border rounded p-2" />
                </div>
                <div class="flex flex-col flex-1">
                    <label for="endDate" class="font-semibold">End Date:</label>
                    <input type="date" id="endDate" class="border rounded p-2" />
                </div>
            </div>

            <div class="flex justify-center mb-4">
                <button onclick="loadHistoryData()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                    Load History
                </button>
            </div>

            <canvas id="historyChart" height="100"></canvas>
        </div>
    </div>

    <!-- History Script (separate file) -->
    <script src="history.js"></script>
</body>
</html>
